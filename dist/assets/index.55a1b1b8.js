(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const g="8c8b193cb57b439495312908231008",v=async a=>{const t=`http://api.weatherapi.com/v1/search.json?lang=pt&key=${g}&q=${a}`;return await(await fetch(t)).json()},x=async a=>{const t=`http://api.weatherapi.com/v1/current.json?lang=pt&key=${g}&q=${a}`;return await(await fetch(t)).json()},L=async a=>{const t=`http://api.weatherapi.com/v1/forecast.json?lang=pt&key=${g}&q=${a}&days=7`,c=await(await fetch(t)).json(),{forecast:e}=c,n=[];return e.forecastday.forEach(i=>{const s={date:i.date,maxTemp:i.day.maxtemp_c,minTemp:i.day.mintemp_c,condition:i.day.condition.text,icon:i.day.condition.icon};n.push(s)}),n};function o(a,t,r=""){const c=document.createElement(a);return c.classList.add(...t.split(" ")),c.textContent=r,c}function k(a){const{date:t,maxTemp:r,minTemp:c,condition:e,icon:n}=a,i=new Date(t);i.setDate(i.getDate()+1);const s=i.toLocaleDateString("pt-BR",{weekday:"short"}),d=o("div","forecast"),h=o("p","forecast-weekday",s),f=o("span","forecast-temp max","max"),C=o("span","forecast-temp max",`${r}\xBA`),E=o("span","forecast-temp min","min"),m=o("span","forecast-temp min",`${c}\xBA`),l=o("div","forecast-temp-container");l.appendChild(f),l.appendChild(E),l.appendChild(C),l.appendChild(m);const u=o("p","forecast-condition",e),p=o("img","forecast-icon");p.src=n.replace("64x64","128x128");const y=o("div","forecast-middle-container");return y.appendChild(l),y.appendChild(p),d.appendChild(h),d.appendChild(y),d.appendChild(u),d}function w(a){const t=document.getElementById(a);for(;t.firstChild;)t.removeChild(t.firstChild)}function I(a){const t=document.getElementById("forecast-container"),r=document.getElementById("weekdays");w("weekdays"),a.forEach(c=>{const e=k(c);r.appendChild(e)}),t.classList.remove("hidden")}function B(a){const{name:t,country:r,temp:c,condition:e,icon:n,url:i}=a,s=o("li","city"),d=o("div","city-heading"),h=o("h2","city-name",t),f=o("p","city-country",r);d.appendChild(h),d.appendChild(f);const C=o("p","city-temp",`${c}\xBA`),E=o("p","city-condition",e),m=o("div","city-temp-container");m.appendChild(E),m.appendChild(C);const l=o("img","condition-icon");l.src=n.replace("64x64","128x128");const u=o("div","city-info-container");u.appendChild(m),u.appendChild(l),s.appendChild(d),s.appendChild(u);const p=o("button","buttonCity");return p.textContent="Ver previs\xE3o",s.appendChild(p),p.addEventListener("click",async()=>{const y=await L(i);I(y)}),s}async function b(a){a.preventDefault(),w("cities");const r=document.getElementById("search-input").value,c=await v(r);if(c.length===0){window.alert("Nenhuma cidade encontrada");return}const e=c.map(s=>s.url),n=document.getElementById("cities");(await Promise.all(e.map(async s=>{const d=await x(s);return{name:d.location.name,country:d.location.country,temp:d.current.temp_c,condition:d.current.condition.text,icon:d.current.condition.icon,url:s}}))).forEach(s=>n.appendChild(B(s)))}document.getElementById("search-form").addEventListener("submit",b);document.getElementById("close-forecast").addEventListener("click",()=>{document.getElementById("forecast-container").classList.add("hidden")});
